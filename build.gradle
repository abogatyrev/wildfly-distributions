buildscript {
    repositories {
        mavenLocal()
        jcenter()
        maven {
            url "https://plugins.gradle.org/m2/"
        }
    }
    dependencies {
        classpath "com.netflix.nebula:gradle-ospackage-plugin:${gradleOspackagePlugin}"
        classpath "com.jfrog.bintray.gradle:gradle-bintray-plugin:${gradleBintrayPluginVersion}"
    }
}

apply from: 'properties.gradle'

subprojects {
    apply plugin: 'nebula.ospackage'
    apply plugin: 'com.jfrog.bintray'

    bintray {
        user = project.hasProperty('bintrayUser') ? project.property('bintrayUser') : System.getenv('BINTRAY_USER')
        key = project.hasProperty('bintrayApiKey') ? project.property('bintrayApiKey') : System.getenv('BINTRAY_API_KEY')

        filesSpec {
            from 'build/distributions'
            into '.'
        }

        dryRun = false //[Default: false] Whether to run this as dry-run, without deploying
        publish = true //[Default: false] Whether version should be auto published after an upload
        //override = true //[Default: false] Whether to override version artifacts already published - doesn't work...
    }

    task Wrapper(type: Wrapper) { // run > gradle wrapper
        gradleVersion = '4.0.2'
    }
}